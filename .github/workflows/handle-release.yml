name: Handle Release

on:
  release:
    types: [published]

jobs:
  handle-release:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - name: Setup Java 8
      uses: actions/setup-java@v1
      with:
        java-version: 8
    - name: Handle Release
      run: ./gradlew handleReleaseFromGitHubRef
      env:
        ZAPBOT_TOKEN: ${{ secrets.ZAPBOT_TOKEN }}
          # TODO
    #- name: Check Auth
    #  run: curl --request POST --url https://eu.auth0.com/token --header 'content-type: application/json' '{"client_id":"M0sEf9p8BqyDC3iQbkts7YGUdjx20qkO","client_secret":"VhxWwGb6uyZg2u1mthxCacEfraeCKsMTcr3beL8nXozLJQZikO8Euyv5fPBhffKB" ,"grant_type":"client_credentials"}'
